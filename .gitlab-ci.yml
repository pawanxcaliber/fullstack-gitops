stages:
  - build

variables:
  DOCKER_DRIVER: overlay2

build-and-push:
  stage: build
  # REMOVED the 'tags' section completely to fix the syntax error
  script:
    - echo "ğŸ—ï¸ Logging into GitLab Container Registry..."
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    
    - echo "ğŸ“¦ Building Frontend Image..."
    - docker build -t $CI_REGISTRY_IMAGE/frontend:v1 ./frontend
    - docker push $CI_REGISTRY_IMAGE/frontend:v1
    
    - echo "ğŸ“¦ Building Backend Image..."
    - docker build -t $CI_REGISTRY_IMAGE/backend:v1 ./backend
    - docker push $CI_REGISTRY_IMAGE/backend:v1
    
    - echo "âœ… Build Complete!"